<form class="sm-preset-manager-form">
  <!-- Save Current Settings Section -->
  <div class="sm-save-preset-section">
    <h3>Save Current Settings</h3>
    <div class="sm-save-preset-row">
      <input type="text" id="new-preset-name" placeholder="Enter preset name..." class="sm-preset-input">
      <button type="button" class="sm-save-current-btn">
        <i class="fas fa-save"></i> Save
      </button>
    </div>
  </div>

  <!-- Token Placement Mode Section -->
  <div class="sm-placement-mode-section">
    <div class="sm-placement-mode-controls">
      <label class="sm-placement-checkbox" for="placement-mode-checkbox">
        <input type="checkbox" id="placement-mode-checkbox" {{#if placementModeActive}}checked{{/if}}>
        <span class="sm-checkbox-label">Enable Token Placement Mode</span>
      </label>
      {{#if placementModeActive}}
        {{#if selectedPresetForPlacement}}
          <div class="sm-selected-preset-info">
            <small>Selected for placement: <strong>{{selectedPresetForPlacement}}</strong></small>
          </div>
        {{else}}
          <div class="sm-no-preset-selected">
            <small><em>Click on a preset thumbnail below to select it for placement</em></small>
          </div>
        {{/if}}
      {{/if}}
    </div>
  </div>
 
  <div class="sm-preset-list">
    {{#if presets.length}}
      {{#each presets}}
      <div class="sm-preset-item {{#if isSelected}}sm-preset-selected{{/if}}" data-preset-name="{{name}}">
        <div class="sm-preset-controls">
          <i class="fas fa-times sm-delete-preset-btn" data-preset-name="{{name}}"></i>
        </div>
        <div class="sm-preset-thumbnail">
          {{#if imageUrl}}
            {{#if isVideo}}
              <video src="{{imageUrl}}" class="sm-preset-video" autoplay loop muted playsinline preload="metadata"></video>
            {{else}}
              <img src="{{imageUrl}}" alt="{{name}}" class="sm-preset-image" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
              <div class="sm-preset-no-image" style="display: none;">
                <i class="fas fa-image"></i>
                <span>Image Error</span>
              </div>
            {{/if}}
          {{else}}
            <div class="sm-preset-no-image">
              <i class="fas fa-image"></i>
              <span>No Image</span>
            </div>
          {{/if}}
        </div>
        <div class="sm-preset-details-container">
          <div class="sm-preset-info">
            <h4 class="sm-preset-name">{{name}}</h4>
            {{#if ../placementModeActive}}
              <div class="sm-preset-placement-hint">
                <small><em>{{#if isSelected}}Selected - Click canvas to place{{else}}Click to select{{/if}}</em></small>
              </div>
            {{else}}
              <div class="sm-preset-apply-hint">
                <small><em>Click to apply to selected token</em></small>
              </div>
            {{/if}}
          </div>
        </div>
      </div>
      {{/each}}
    {{else}}
      <div class="sm-no-presets">
        <i class="fas fa-folder-open"></i>
        <p>No presets saved yet</p>
        <p class="sm-no-presets-hint">Create presets in the main Size Matters window</p>
      </div>
    {{/if}}
  </div>
  
  <!-- Import/Export Section -->
  <div class="sm-import-export-section">
    <h3>Import/Export Presets</h3>
    <div class="sm-import-export-row">
      <button type="button" class="sm-import-presets-btn">
        <i class="fas fa-upload"></i> Import
      </button>
      <button type="button" class="sm-export-presets-btn">
        <i class="fas fa-download"></i> Export
      </button>
    </div>
  </div>
</form>